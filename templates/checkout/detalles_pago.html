{% load static %}
<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Checkout – Detalles de pago</title>
    <link rel="stylesheet" href="{% static 'css/estilo.css' %}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        .gateway-grid {
            display: grid;
            gap: 1rem;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            margin-bottom: 2rem;
        }
        .gateway-card {
            background: #f8fafc;
            border: 1px solid rgba(15, 23, 42, 0.08);
            border-radius: 16px;
            padding: 1.25rem;
            display: grid;
            gap: 0.65rem;
            box-shadow: 0 8px 20px rgba(15, 23, 42, 0.08);
        }
        .gateway-card__header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-weight: 600;
            color: #0f172a;
        }
        .gateway-chip {
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            color: #0f172a;
            background: #e0f2fe;
            border-radius: 999px;
            padding: 0.15rem 0.7rem;
            letter-spacing: 0.04em;
        }
        .gateway-card__body {
            font-size: 0.95rem;
            color: #475569;
        }
        .gateway-list {
            list-style: none;
            padding: 0;
            margin: 0;
            display: grid;
            gap: 0.35rem;
        }
        .checkout-panel__title + p {
            margin: 0 0 1.5rem;
            color: #475569;
        }
    </style>
</head>

<body class="catalogo checkout-page">
<header class="hero hero--detalle">
    <div class="hero__nav contenedor">
        <div class="brand">
            <img class="brand__logo" src="{% static 'images/logoZHPfinalSinFondo.png' %}" alt="Logo Zapatería Hermanos Parera">
            <div>
                <p class="brand__eyebrow">Checkout · Paso 2 de 3</p>
                <h1>Detalles de Pago</h1>
                <p class="brand__tagline">Selecciona el método con el que deseas finalizar tu compra.</p>
            </div>
        </div>
        <div class="hero__actions">
            <a class="boton boton--outline" href="{% url 'pedidos:checkout_entrega' %}">Volver a entrega</a>
            <a class="boton" href="{% url 'carrito' %}">Ver carrito</a>
        </div>
    </div>
</header>

<main class="contenedor seccion checkout-contenido">
    <section class="checkout-panel">
        <h2 class="checkout-panel__title">Método de pago</h2>
        <p>Elige entre pago inmediato con tarjeta vía Stripe o contra reembolso al recibir el paquete.</p>

        <div class="gateway-grid" aria-label="Pasarelas disponibles">
            <article class="gateway-card">
                <div class="gateway-card__header">
                    <span>Stripe</span>
                    <span class="gateway-chip">Tarjetas</span>
                </div>
                <div class="gateway-card__body">
                    <p>Acepta Visa, MasterCard y American Express con autenticación 3D Secure y tokenización.</p>
                    <ul class="gateway-list">
                        <li>• Cobro inmediato</li>
                        <li>• Conversión automática de divisas</li>
                        <li>• Reintentos inteligentes ante fallo</li>
                    </ul>
                </div>
            </article>

            <article class="gateway-card">
                <div class="gateway-card__header">
                    <span>Contra reembolso</span>
                    <span class="gateway-chip">Pago al recibir</span>
                </div>
                <div class="gateway-card__body">
                    <p>Abona tu pedido directamente al repartidor. Ideal si prefieres revisar el paquete antes.</p>
                    <ul class="gateway-list">
                        <li>• Sin compartir datos bancarios</li>
                        <li>• Disponible en península y Baleares</li>
                        <li>• Confirma el importe al momento de entrega</li>
                    </ul>
                </div>
            </article>
        </div>

        <form method="post" class="formulario formulario--checkout">
            {% csrf_token %}
            {% if form.non_field_errors %}
                <div class="alerta alerta--error">{{ form.non_field_errors }}</div>
            {% endif %}
            <div class="formulario__grid formulario__grid--full">
                {% for field in form %}
                    <div class="formulario__campo">
                        <label for="{{ field.id_for_label }}">{{ field.label }}</label>
                        {{ field }}
                        {% if field.help_text %}
                            <small>{{ field.help_text }}</small>
                        {% endif %}
                        {% for error in field.errors %}
                            <p class="formulario__error">{{ error }}</p>
                        {% endfor %}
                    </div>
                {% endfor %}
            </div>
            <button class="boton" type="submit">Confirmar Compra</button>
        </form>
    </section>
    <aside class="checkout-summary">
        <h3>Resumen de pasos</h3>
        <ul class="checkout-steps">
            <li class="checkout-steps__item checkout-steps__item--done">Entrega</li>
            <li class="checkout-steps__item checkout-steps__item--active">Pago</li>
            <li class="checkout-steps__item">Confirmación</li>
        </ul>
        <p>Los datos se guardan en tu sesión para completar el pedido en el siguiente paso.</p>
    </aside>
</main>

{% include "includes/footer_no_devoluciones.html" %}
</body>
</html>
